ממ"ן 15 – אלגוריתמים מבוזרים ברשתות תקשורת
שובל כהן 208748152
הוראות הרצה

יש לשים את התיקייה בתוך תקיית projects בSinalgo
לאחר הרצת הפרויקט (Maman15) יש ללחוץ על הכפתור “Create UDG” ולאחר מכן לבחור את כמות הקודקודים ואת כמות סיבובי החלק הראשון של אלגוריתם מציאת הMIS.
כעת יש להריץ את האלגוריתם עד שנראה כי כלל הקודקודים צבועים באדום/ירוק ואין הודעות העוברות בין קודקודים (אין קשתות אדומות).
כעת נעצור את ריצת האלגוריתם ונלחץ בלחצן ימני על קודקוד מסוים, שיהיה קודקוד המקור שלנו ונבחר באפשרות “Route Message”  וע"פ ההוראות נבחר את קודקוד היעד וקודקוד השייך לMIS הצמוד לו.
לאחר מכן ניתן להוסיף מידע שנשלח באמצעות הניתוב מקודקוד המקור לקודקוד היעד דרך הקודקוד השייך לMIS הצמוד לו.
נריץ את האלגוריתם עד שנקבל Pop-up עם הודעה כי הקודקוד קיבל את ההודעה יחד עם תוכנה.
ניתן ללחוץ על כפתורי “Max degree”, ”Routing table”, “Statistic”  בכדי לראות מידע סטטיסטי על הגרף.

בהצלחה רבה!
 
הסבר כללי על שלבי האלגוריתם

שלב 1

כקלט מהמשתמש מתקבל מספר הקודקודים המייצר גרף קודקודים המפוזרים רנדומלית עם מודל חיבוריות של UDG.

שלב 2

במקרה בו אין החלטה כל קודקוד יקבל במשך t סבבים מספר נבחר משכניו.
בסבב הראשון כל הקודקודים מגרילים מספר ושולחים אותו לשכניהם ← בסבב הראשון אף קודקוד לא יקבל הודעה.
כלומר משך זמן הרצת האלגוריתם הרנדומי הוא t+1.
כאשר קודקוד מקבל מספר הוא משווה אותו ביחס למספר ששלח בסיבוב הקודם ובודק האם קיים מספר כלשהו שקיבל שיותר גדול ממנו. אם סיים לקרוא את כל ההודעות ואין אחד כזה - זה אומר שהוא הגדול ביותר מבין המספרים שהוגרלו אצל כל שכניו ולכן יקבע את עצמו כחלק מהMIS – וישלח הודעת החלטה שעל גביה מצוין האם הוא שייך לMIS או לא לכל שכניו, במקרה זה ישלח שאכן שייך לMIS.
כאשר קודקוד מקבל הודעת החלטה הוא קודם כל בודק האם החלטה היא להיות בMIS. אם שכנו בMIS אז יקבע את עצמו מחוץ לMIS וישלח לשכניו הודעת החלטה האומרת שלא שייך לMIS.
אם הודעת ההחלטה היא החלטה לא להיות בMIS – הקודקוד המקבל יבדוק האם השולח של ההודעה בעל ID גדול ממנו. אם כן – מוסיף אותו לרשימת "הקודקודים הגדולים ממנו שכבר אינם פעילים ואינם בMIS".
כל הדבר הזה קורה במשך t+1 הסבבים של האלגוריתם הרנדומי – כאשר הcounter יעבור את t+1, נתחיל בשלב הדטרמיניסטי ובו ונבדוק בכל פעם האם רשימת "הקודקודים הגדולים ממנו שכבר אינם פעילים ואינם בMIS" מכילה את כל הIDים של הקודקודים הגדולים ממנו. אם כן – יקבע עצמו כשייך לMIS וישלח זאת לכל שכניו.

שלב 3

מיד לאחר קביעת קודקוד כשייך לMIS יתחיל את שלב הBFS (יכול לקרות במקביל לשלב קביעת קודקודים אחרים כשייכים או לא לMIS), כלומר יפיץ הודעה מסוג BFS המכילה בתוכה את rootId המאותחל להיות הID של הקודקוד ששייך לMIS.
כאשר קודקוד מקבל הודעה מסוג BFS הוא בודק בטבלת הניתוב שלו (טבלה בעלת גודל מקסימלי של |S| שורות שבה הkey הוא ID של קודקוד השייך לS והValue הוא הID של הקודקוד המשריש את עץ הBFS) האם קיבלתי הודעת BFS בעבר עם rootId כזה וכמובן האם זו לא הודעה שנשלחה ממני במקור (rootId != this.ID), כלומר האם יש לי רשומה בטבלה בה הrootId = key.
אם ישנה רשומה כזו – אתעלם מההודעה.
אם אין – אצור רשומה כזו כאשר הvalue הוא הID של הקודקוד ששלח את ההודעה הזו, ואפיץ את אותה הודעת הBFS גם לכל שכניי. (לקודקוד ששלח אליי את ההודעה כבר יש רשומה כזו ולכן יתעלם מהודעה זו. אפשר כמובן פשוט לא לשלוח אליו את ההודעה אך נאמר בדוקיומנטציה שהפונקציה המובנית broadcast מהירה יותר משליחה ישירה לכל השכנים באיטרציה – ולכן אני אשדר לכולם)
כלומר בסופו של התהליך לקודקוד יהיה את האב בעץ הBFS המושרש בID מסוים השייך לMIS, כנדרש.

שלב 4

כל שלבי 1-3 יתבצעו ברצף תוך שליחת הודעות. רק קודקוד שסיים את כל השלבים יפסיק לקבל ולשלוח הודעות.
אם לא נשלחות הודעות בכלל במהלך הסבב אזי סיימנו את כלל השלבים הנדרשים וכל קודקוד כבר הכריע אם הוא בMIS או לא ויש לו טבלאות ניתוב לכל קודקודי הMIS אליהם יש לו מסלול (איתו ברכיב הקשירות).
לאחר שלב זה נבחר קודקוד מקור, יעד וקודקוד MIS הצמוד לו – ונשלח הודעה המכילה את המידע שנשלח, את הID של קודקוד הMIS ואת הID של קודקוד היעד - מקודקוד המקור אל עבר קודקוד הMIS שנבחר באמצעות טבלת הניתוב.
לאחר שנגיע אל קודקוד הMIS נמצא מבין שכניו את קודקוד היעד ונשלח אליו את ההודעה.
קודקוד היעד יזהה שההודעה נועדה אליו וידפיס את תוכן ההודעה ובכך סיימנו.
 
טבלת הרצות

#	מספר קודקודים	דרגה מקסימלית	גודל מקסימלי של טבלת הניתוב
1	200	35	16
2	300	50	20
3	350	53	21
4	450	70	19
5	500	25	59
6	600	33	65
7	700	34	65
8	850	48	62
9	950	45	68
10	1000	49	72
11	1100	50	69
12	1200	58	68
13	1300	58	69
14	1400	65	71
15	1500	66	69
16	1600	68	66
17	1700	75	67
18	1800	73	71
19	1900	78	67
20	2000	64	91

מימדי המרחב שונו ע"מ לאפשר גודל דרגה רלוונטי במגבלות השאלה